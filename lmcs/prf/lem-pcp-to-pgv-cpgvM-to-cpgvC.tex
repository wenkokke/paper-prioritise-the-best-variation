\proof
\label{prf:lem-pcp-to-pgv-cpgvM-to-cpgvC}
By induction on the structure of $\pcp{\tm{P}}$.

\begin{case*}[$\pcp{\tm{\res{x}{y}{P}}}$]
  We have:
  \begin{mathpar}
    \begin{array}{lrll}
      \pcp{\tm{\cpgvM{\res{x}{y}{P}}}}
       & =
       & \pgv{\tm{\child\;\letpair{x}{y}{\new\;\unit}{\cpgvM{P}}}}
      \\
       & \pgv{\cred^+}
       & \pgv{\tm{\res{x}{y}{(\child\;\cpgvM{P})}}}
      \\
       & \pgv{\cred^\star}
       & \pgv{\tm{\res{x}{y}{\cpgvC{P}}}}
      \\
       & =
       & \pcp{\tm{\cpgvC{\res{x}{y}{P}}}}
    \end{array}
  \end{mathpar}
\end{case*}
\begin{case*}[$\pcp{\tm{\ppar{P}{Q}}}$]
  \begin{mathpar}
    \begin{array}{lrll}
      \pcp{\tm{\cpgvM{\ppar{P}{Q}}}}
       & =
       & \pgv{\tm{\child\;\andthen{\spawn\;(\lambda\unit.\cpgvM{P})}{\cpgvM{Q}}}}
      \\
       & \pgv{\cred^+}
       & \pgv{\tm{\ppar{\child\;\cpgvM{P}}{\child\;\cpgvM{Q}}}}
      \\
       & \pgv{\cred^\star}
       & \pgv{\tm{\ppar{\cpgvC{P}}{\cpgvC{Q}}}}
      \\
       & =
       & \pcp{\tm{\cpgvC{\ppar{P}{Q}}}}
    \end{array}
  \end{mathpar}
\end{case*}
\begin{case*}[$\pcp{\tm{\send{x}{y}{P}}}$]
  \begin{mathpar}
    \begin{array}{lrll}
      \pcp{\tm{\cpgvM{\send{x}{y}{P}}}}
       & =
       & \pgv{\tm{\letpair{y}{z}{\new\;\unit}{\letbind{x}{\send\;{\pair{z}{x}}}{\cpgvM{P}}}}}
      \\
       & \pgv{\cred^+}
       & \pgv{\tm{\res{y}{z}{(\child\;\letbind{x}{\send\;\pair{z}{x}}{\cpgvM{P}})}}}
      \\
       & =
       & \pcp{\tm{\cpgvC{\send{x}{y}{P}}}}
    \end{array}
  \end{mathpar}
\end{case*}
\begin{case*}[$\pcp{\tm{\inl{x}{P}}}$]
  \begin{mathpar}
    \begin{array}{lrll}
      \pcp{\tm{\cpgvM{\send{x}{y}{P}}}}
       & =
       & \pgv{\tm{\letbind{x}{\select{\labinl}\;{x}}{\cpgvM{P}}}}
      \\
       & \elabarrow
       & \pgv{\tm{\letbind{x}{\letpair{y}{z}{\new\;\unit}{\andthen{\close\;(\send\;{\pair{\inl{y}}{x}})}{z}}}{\cpgvM{P}}}}
      \\
       & \pgv{\cred^+}
       & \pgv{\tm{\res{y}{z}{(\child\;\letbind{x}{\andthen{\close\;(\send\;\pair{\inl{y}}{x})}{z}}{\cpgvM{P}})}}}
      \\
       & =
       & \pcp{\tm{\cpgvC{\send{x}{y}{P}}}}
    \end{array}
  \end{mathpar}
\end{case*}
\begin{case*}[$\pcp{\tm{\inr{x}{P}}}$]
  \begin{mathpar}
    \begin{array}{lrll}
      \pcp{\tm{\cpgvM{\send{x}{y}{P}}}}
       & =
       & \pgv{\tm{\letbind{x}{\select{\labinr}\;{x}}{\cpgvM{P}}}}
      \\
       & \elabarrow
       & \pgv{\tm{\letbind{x}{\letpair{y}{z}{\new\;\unit}{\andthen{\close\;(\send\;{\pair{\inr{y}}{x}})}{z}}}{\cpgvM{P}}}}
      \\
       & \pgv{\cred^+}
       & \pgv{\tm{\res{y}{z}{(\child\;\letbind{x}{\andthen{\close\;(\send\;\pair{\inr{y}}{x})}{z}}{\cpgvM{P}})}}}
      \\
       & =
       & \pcp{\tm{\cpgvC{\send{x}{y}{P}}}}
    \end{array}
  \end{mathpar}
\end{case*}
\begin{case*}[$*$]
  In all other cases, $\pgv{\tm{\child\;\cpgvM{P}}=\tm{\cpgvC{P}}}$.
\end{case*}
\qed

%%% Local Variables:
%%% TeX-master: "../priorities"
%%% End:
