\begin{proof}
  By induction on the derivation of $\tseq[\cs{p}]{\ty{\Gamma},\tmty{x}{U'}}{M}{T}$.
  \begin{case*}[\LabTirName{T-Var}]
    By \cref{lem:value-done}, $\cs{q}=\cs{\pbot}$.
    \begin{mathpar}
      \inferrule*{
      }{\tseq[\cs{\pbot}]{\tmty{x}{U'}}{x}{U'}}
      \substarrow{V}{x}
      \tseq[\cs{\pbot}]{\ty{\Theta}}{V}{U'}
    \end{mathpar}
  \end{case*}
  \begin{case*}[\LabTirName{T-Lam}]
    By \cref{lem:value-done}, $\pr(\ty{\Theta})=\pr(\ty{U'})$, hence $\pr(\ty{\Gamma},\ty{\Theta})=\pr(\ty{\Gamma},\ty{U'})$.
    \begin{mathpar}
      \inferrule*{
        \tseq[\cs{o}]{\ty{\Gamma},\tmty{x}{U'},\tmty{y}{T}}{M}{U}
      }{\tseq[\cs{\pbot}]{\ty{\Gamma},\tmty{x}{U'}}
        {\lambda y.M}
        {\tylolli[\cs{\pr(\ty{\Gamma},\ty{U'})},\cs{o}]{T}{U}}}
      \substarrow{V}{x}
      \inferrule*{
        \tseq[\cs{o}]{\ty{\Gamma},\ty{\Theta},\tmty{y}{T}}{\subst{M}{V}{x}}{U}
      }{\tseq[\cs{\pbot}]{\ty{\Gamma},\ty{\Theta}}
        {\lambda y.\subst{M}{V}{x}}
        {\tylolli[\cs{\pr(\ty{\Gamma},\ty{\Theta})},\cs{o}]{T}{U}}}
    \end{mathpar}
  \end{case*}
  \begin{case*}[\LabTirName{T-App}]
    There are two subcases:
    \begin{subcase*}[$\tm{x}\in\tm{M}$]
      Immediately, from the induction hypothesis.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\tmty{x}{U'}}{M}{\tylolli[\cs{o},\cs{r}]{T}{U}}
          \\
          \tseq[\cs{q}]{\ty{\Delta}}{N}{T}
          \\
          \cs{p}<\pr(\ty{\Delta})
          \\
          \cs{q}<\cs{o}
        }{\tseq[\cs{p}\sqcup\cs{q}\sqcup\cs{r}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{M\;N}{U}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{\tylolli[\cs{o},\cs{r}]{T}{U}}
          \\
          \tseq[\cs{q}]{\ty{\Delta}}{N}{T}
          \\
          \cs{p}<\pr(\ty{\Delta})
          \\
          \cs{q}<\cs{o}
        }{\tseq[\cs{p}\sqcup\cs{q}\sqcup\cs{r}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{(\subst{M}{V}{x})\;N}{U}}
      \end{mathpar}
    \end{subcase*}
    \begin{subcase*}[$\tm{x}\in\tm{N}$]
      By \cref{lem:value-done}, $\pr(\ty{\Theta})=\pr(\ty{U'})$, hence $\pr(\ty{\Delta},\ty{\Theta})=\pr(\ty{\Delta},\ty{U'})$.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{\tylolli[\cs{o},\cs{r}]{T}{U}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{U'}}{N}{T}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{U'})
          \\
          \cs{q}<\cs{o}
        }{\tseq[\cs{p}\sqcup\cs{q}\sqcup\cs{r}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{M\;N}{U}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{\tylolli[\cs{o},\cs{r}]{T}{U}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\ty{\Theta}}{\subst{N}{V}{x}}{T}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{\Theta})
          \\
          \cs{q}<\cs{o}
        }{\tseq[\cs{p}\sqcup\cs{q}\sqcup\cs{r}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{M\;(\subst{N}{V}{x})}{U}}
      \end{mathpar}
    \end{subcase*}
  \end{case*}
  \begin{case*}[\LabTirName{T-LetUnit}]
    There are two subcases:
    \begin{subcase*}[$\tm{x}\in\tm{M}$]
      Immediately, from the induction hypothesis.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\tmty{x}{U'}}{M}{\tyunit}
          \\
          \tseq[\cs{q}]{\ty{\Delta}}{N}{T}
          \\
          \cs{p}<\pr(\ty{\Delta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\letunit{M}{N}}{T}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{\tyunit}
          \\
          \tseq[\cs{q}]{\ty{\Delta}}{N}{T}
          \\
          \cs{p}<\pr(\ty{\Delta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\letunit{\subst{M}{V}{x}}{N}}{T}}
      \end{mathpar}
    \end{subcase*}
    \begin{subcase*}[$\tm{x}\in\tm{N}$]
      By \cref{lem:value-done}, $\pr(\ty{\Theta})=\pr(\ty{U'})$, hence $\pr(\ty{\Delta},\ty{\Theta})=\pr(\ty{\Delta},\ty{U'})$.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{\tyunit}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{U'}}{N}{T}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{U'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\letunit{M}{N}}{T}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{\tyunit}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\ty{\Theta}}{\subst{N}{V}{x}}{T}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{\Theta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\letunit{M}{\subst{N}{V}{x}}}{T}}
      \end{mathpar}
    \end{subcase*}
  \end{case*}
  \begin{case*}[\LabTirName{T-Pair}]
    There are two subcases:
    \begin{subcase*}[$\tm{x}\in\tm{M}$]
      Immediately, from the induction hypothesis.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\tmty{x}{U'}}{M}{T}
          \\
          \tseq[\cs{q}]{\ty{\Delta}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{U'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\pair{M}{N}}{\typrod{T}{U}}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{T}
          \\
          \tseq[\cs{q}]{\ty{\Delta}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{\Theta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\pair{\subst{M}{V}{x}}{N}}{\typrod{T}{U}}}
      \end{mathpar}
    \end{subcase*}
    \begin{subcase*}[$\tm{x}\in\tm{N}$]
      By \cref{lem:value-done}, $\pr(\ty{\Theta})=\pr(\ty{U'})$, hence $\pr(\ty{\Delta},\ty{\Theta})=\pr(\ty{\Delta},\ty{U'})$.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{T}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{U'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{U'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\pair{M}{N}}{\typrod{T}{U}}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{T}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\ty{\Theta}}{\subst{N}{V}{x}}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{\Theta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\pair{M}{\subst{N}{V}{x}}}{\typrod{T}{U}}}
      \end{mathpar}
    \end{subcase*}
  \end{case*}
  \begin{case*}[\LabTirName{T-LetPair}]
    There are two subcases:
    \begin{subcase*}[$\tm{x}\in\tm{M}$]
      Immediately, from the induction hypothesis.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\tmty{x}{U'}}{M}{\typrod{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{y}{T},\tmty{z}{T'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{T},\ty{T'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\letpair{y}{z}{M}{N}}{U}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{\typrod{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{y}{T},\tmty{z}{T'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{T},\ty{T'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\letpair{y}{z}{\subst{M}{V}{x}}{N}}{U}}
      \end{mathpar}
    \end{subcase*}
    \begin{subcase*}[$\tm{x}\in\tm{N}$]
      By \cref{lem:value-done}, $\pr(\ty{\Theta})=\pr(\ty{U'})$, hence $\pr(\ty{\Delta},\ty{\Theta},\ty{T},\ty{T'})=\pr(\ty{\Delta},\ty{U'},\ty{T},\ty{T'})$.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{\typrod{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{U'},\tmty{y}{T},\tmty{z}{T'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{U'},\ty{T},\ty{T'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\letpair{y}{z}{M}{N}}{U}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{M}{\typrod{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\ty{\Theta},\tmty{y}{T},\tmty{z}{T'}}{\subst{N}{V}{x}}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{\Theta},\ty{T},\ty{T'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\letpair{y}{z}{M}{\subst{N}{V}{x}}}{U}}
      \end{mathpar}
    \end{subcase*}
  \end{case*}
  \begin{case*}[\LabTirName{T-Absurd}]
    \begin{mathpar}
      \inferrule*{
        \tseq[o]{\ty{\Gamma},\tmty{x}{U'}}{M}{\tyvoid}
      }{\tseq[o]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\absurd{M}}{T}}
      \substarrow{V}{x}
      \inferrule*{
        \tseq[o]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{\tyvoid}
      }{\tseq[o]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\absurd{\subst{M}{V}{x}}}{T}}
    \end{mathpar}
  \end{case*}
  \begin{case*}[\LabTirName{T-Inl}]
    \begin{mathpar}
      \inferrule*{
        \tseq[o]{\ty{\Gamma},\tmty{x}{U'}}{M}{T}
        \\
        \pr(\ty{T})=\pr(\ty{U})
      }{\tseq[o]{\ty{\Gamma},\tmty{x}{U'}}{\inl{M}}{\tysum{T}{U}}}
      \substarrow{V}{x}
      \inferrule*{
        \tseq[o]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{T}
        \\
        \pr(\ty{T})=\pr(\ty{U})
      }{\tseq[o]{\ty{\Gamma},\ty{\Theta}}{\inl{\subst{M}{V}{x}}}{\tysum{T}{U}}}
    \end{mathpar}
  \end{case*}
  \begin{case*}[\LabTirName{T-Inr}]
    \begin{mathpar}
      \inferrule*{
        \tseq[o]{\ty{\Gamma},\tmty{x}{U'}}{M}{U}
        \\
        \pr(\ty{T})=\pr(\ty{U})
      }{\tseq[o]{\ty{\Gamma},\tmty{x}{U'}}{\inr{M}}{\tysum{T}{U}}}
      \substarrow{V}{x}
      \inferrule*{
        \tseq[o]{\ty{\Gamma},\ty{\Theta}}{\subst{M}{V}{x}}{U}
        \\
        \pr(\ty{T})=\pr(\ty{U})
      }{\tseq[o]{\ty{\Gamma},\ty{\Theta}}{\inr{\subst{M}{V}{x}}}{\tysum{T}{U}}}
    \end{mathpar}
  \end{case*}
  \begin{case*}[\LabTirName{T-CaseSum}]
    There are two subcases:
    \begin{subcase*}[$\tm{x}\in\tm{L}$]
      Immediately, from the induction hypothesis.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\tmty{x}{U'}}{L}{\tysum{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{y}{T}}{M}{U}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{z}{T'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\casesum{L}{y}{M}{z}{N}}{U}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma},\ty{\Theta}}{\subst{L}{V}{x}}{\tysum{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{y}{T}}{M}{U}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{z}{T'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\casesum{\subst{L}{V}{x}}{y}{M}{z}{N}}{U}}
      \end{mathpar}
    \end{subcase*}
    \begin{subcase*}[$\tm{x}\in\tm{M}$ and $\tm{x}\in\tm{N}$]
      By \cref{lem:value-done}, $\pr(\ty{\Theta})=\pr(\ty{U'})$, hence $\pr(\ty{\Delta},\ty{\Theta},\ty{T})=\pr(\ty{\Delta},\ty{U'},\ty{T})$ and $\pr(\ty{\Delta},\ty{\Theta},\ty{T'})=\pr(\ty{\Delta},\ty{U'},\ty{T'})$.
      \begin{mathpar}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{L}{\tysum{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{U'},\tmty{y}{T}}{M}{U}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{U'},\tmty{z}{T'}}{N}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{U'})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\tmty{x}{U'}}{\casesum{L}{y}{M}{z}{N}}{U}}
        \substarrow{V}{x}
        \inferrule*{
          \tseq[\cs{p}]{\ty{\Gamma}}{L}{\tysum{T}{T'}}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\ty{\Theta},\tmty{y}{T}}{\subst{M}{V}{x}}{U}
          \\
          \tseq[\cs{q}]{\ty{\Delta},\ty{\Theta},\tmty{z}{T'}}{\subst{N}{V}{x}}{U}
          \\
          \cs{p}<\pr(\ty{\Delta},\ty{\Theta})
        }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta},\ty{\Theta}}{\casesum{L}{y}{\subst{M}{V}{x}}{z}{\subst{N}{V}{x}}}{U}}
      \end{mathpar}
    \end{subcase*}
  \end{case*}
  \noindent
  We omit the cases where $\tm{x}\not\in\tm{M}$.
\end{proof}

%%% Local Variables:
%%% TeX-master: "../priorities"
%%% End:
