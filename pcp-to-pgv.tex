\documentclass[main.tex]{subfiles}

\begin{document}

\section{Priority CP to Priority GV}

\subsection{Translation}

\paragraph{Translation on types}
\[
\begin{array}{lcl}
  \ty{\cpgvT{\pcp{\tytens[\cs{o}]{A}{B}}}}
  & = & \pgv{\ty{\tysend[\cs{o}]{\co{\cpgvT{A}}}{\cpgvT{B}}}} \\
  \ty{\cpgvT{\pcp{\typarr[\cs{o}]{A}{B}}}}
  & = & \pgv{\ty{\tyrecv[\cs{o}]{\cpgvT{A}}{\cpgvT{B}}}} \\
  \ty{\cpgvT{\pcp{\typlus[\cs{o}]{A}{B}}}}
  & = & \pgv{\ty{\tyselect[\cs{o}]{\cpgvT{A}}{\cpgvT{B}}}} \\
  \ty{\cpgvT{\pcp{\tywith[\cs{o}]{A}{B}}}}
  & = & \pgv{\ty{\tyoffer[\cs{o}]{\cpgvT{A}}{\cpgvT{B}}}}
\end{array}
\quad
\begin{array}{lcl}
  \ty{\cpgvT{\pcp{\tyone[\cs{o}]}}}
  & = & \ty{\pgv{\tyends[\cs{o}]}} \\
  \ty{\cpgvT{\pcp{\tybot[\cs{o}]}}}
  & = & \ty{\pgv{\tyendr[\cs{o}]}} \\
  \ty{\cpgvT{\pcp{\tynil[\cs{o}]}}}
  & = & \pgv{\ty{\tyselectemp[\cs{o}]}} \\
  \ty{\cpgvT{\pcp{\tytop[\cs{o}]}}}
  & = & \pgv{\ty{\tyofferemp[\cs{o}]}}
\end{array}
\]

\paragraph{Translation on terms}
\[
\begin{array}{lcl}
  \tm{\cpgvC{\pcp{\res{x}{y}{P}}}}
  & = & \tm{\pgv{\res{x}{y}{\cpgvC{P}}}} \\
  \tm{\cpgvC{\pcp{\ppar{P}{Q}}}}
  & = & \tm{\pgv{\ppar{\cpgvC{P}}{\cpgvC{Q}}}} \\
  \tm{\cpgvC{P}}
  & = & \tm{\pgv{\child{\cpgvM{P}}}} \\
  \\
  \tm{\cpgvM{\pcp{\link{x}{y}}}}
  & = & \tm{\pgv{\link\;{\pair{x}{y}}}} \\
  \tm{\cpgvM{\pcp{\res{x}{y}{P}}}}
  & = & \tm{\pgv{\letpair{x}{y}{\new}{\cpgvM{P}}}} \\
  \tm{\cpgvM{\pcp{\ppar{P}{Q}}}}
  & = & \tm{\pgv{\andthen{\spawn\;{(\lambda\unit.\cpgvM{P})}}{\cpgvM{Q}}}} \\
  \tm{\cpgvM{\pcp{\halt}}}
  & = & \tm{\pgv{\unit}} \\
  \tm{\cpgvM{\pcp{\close{x}{P}}}}
  & = & \tm{\pgv{\andthen{\close\;{x}}{\cpgvM{P}}}} \\
  \tm{\cpgvM{\pcp{\wait{x}{P}}}}
  & = & \tm{\pgv{\andthen{\wait\;{x}}{\cpgvM{P}}}} \\
  \tm{\cpgvM{\pcp{\send{x}{y}{P}}}}
  & = & \tm{\pgv{\letpair{y}{z}{\new}{\letbind{x}{\send\;{\pair{z}{x}}}{\cpgvM{P}}}}} \\
  \tm{\cpgvM{\pcp{\recv{x}{y}{P}}}}
  & = & \tm{\pgv{\letpair{y}{x}{\recv\;{x}}{\cpgvM{P}}}} \\
  \tm{\cpgvM{\pcp{\inl{x}{P}}}}
  & = & \tm{\pgv{\letbind{x}{\select{\labinl}\;{x}}{\cpgvM{P}}}} \\
  \tm{\cpgvM{\pcp{\inr{x}{P}}}}
  & = & \tm{\pgv{\letbind{x}{\select{\labinr}\;{x}}{\cpgvM{P}}}} \\
  \multicolumn{3}{l}{\tm{\cpgvM{\pcp{\offer{x}{\cpgvM{P}}{\cpgvM{Q}}}}}} \\
  & = & \tm{\pgv{\offer{x}{x}{\cpgvM{P}}{x}{\cpgvM{Q}}}}
\end{array}
\]

\subsection{Metatheory}

\begin{restatablelemma}{lempcptopgvtermspreservation}[Preservation, $\cpgvM{\cdot}$]
  \label{lem:pcp-to-pgv-terms-preservation}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ in PCP,
  then $\pgv{\tseq[\cs{p}]{\ty{\cpgvT{\Gamma}}}{\cpgvM{P}}{\tyunit}}$ in PGV.
\end{restatablelemma}
\begin{proof}
  By induction on the derivation of $\pcp{\seq{P}{\ty{\Gamma}}}$.
  (Details in \cref{prf:lem-pcp-to-pgv-terms-preservation}.)
\end{proof}

\begin{restatabletheorem}{thmpcptopgvconfspreservation}[Preservation, $\cpgvC{\cdot}$]
  \label{thm:pcp-to-pgv-confs-preservation}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ in PCP,
  then $\pgv{\cseq[\child]{\ty{\cpgvT{\Gamma}}}{\cpgvC{P}}}$ in PGV.
\end{restatabletheorem}
\begin{proof}
  By induction on the derivation of $\pcp{\seq{P}{\ty{\Gamma}}}$.
  (Details in \cref{prf:lem-pcp-to-pgv-terms-preservation}.)
\end{proof}

\begin{restatabletheorem}{thmpcptopgvooperationalcorrespondencesoundness}%
  [Operational Correspondence, Soundness, $\cpgvC{\cdot}$]
  \label{thm:pcp-to-pgv-operational-correspondence-soundness}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ and $\pgv{\tm{\cpgvC{P}}\cred\tm{\conf{C}}}$,
  there exists a $\tm{Q}$ such that $\pcp{\tm{P}\red\tm{Q}}$ and $\pgv{\tm{\conf{C}}\equiv\tm{\cpgvC{Q}}}$
\end{restatabletheorem}
\begin{proof}
  By induction on the derivation of $\pgv{\tm{\cpgvC{P}}\cred\tm{\conf{C}}}$.
  \admit
\end{proof}

\begin{restatablelemma}{lempcptopgvcpgvMcpgvCcompleteness}
  \label{lem:pcp-to-pgv-cpgvM-cpgvC-completeness}
  $\pgv{\tm{\child\;\cpgvM{P}}\cred^\star\tm{\cpgvC{P}}}$.
\end{restatablelemma}
\begin{proof}
  By induction on the structure of $\pcp{\tm{P}}$.
  (Details in \cref{prf:lem-pcp-to-pgv-cpgvM-cpgvC-completeness}.)
\end{proof}

\begin{restatablelemma}{lempcptopgvoperationalcorrespondenceequiv}%
  [Operational Correspondence, $\equiv$]
  \hfill\\%newline before theorem statement
  \label{lem:pcp-to-pgv-confs-operational-correspondence-equiv}
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ and $\pcp{\tm{P}\equiv\tm{Q}}$,
  then $\pgv{\tm{\cpgvC{P}}\equiv\tm{\cpgvC{Q}}}$.
\end{restatablelemma}
\begin{proof}
  By induction on the derivation of $\pcp{\tm{P}\equiv\tm{Q}}$.
  \admit
\end{proof}

\begin{restatabletheorem}{thmpcptopgvoperationalcorrespondencecompleteness}%
  [Operational Correspondence, Completeness, $\cpgvC{\cdot}$]
  \label{thm:pcp-to-pgv-operational-correspondence-completeness}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ and $\pcp{\tm{P}\red\tm{Q}}$,
  then $\pgv{\tm{\cpgvC{P}}\cred^+\tm{\cpgvC{Q}}}$.
\end{restatabletheorem}
\begin{proof}
  By induction on the derivation of $\pcp{\tm{P}\red\tm{Q}}$.
  (Details in \cref{prf:thm-pcp-to-pgv-operational-correspondence-completeness}.)
\end{proof}

\end{document}

%%% Local Variables:
%%% TeX-master: "priorities"
%%% End:
