\documentclass[main.tex]{subfiles}

\begin{document}

\section{Priority CP to Priority GV}

\subsection{Translation}
See \cref{fig:pcp-to-pgv}.
\input{fig/pcp-to-pgv}

\subsection{Metatheory}

\begin{restatablelemma}{lempcptopgvtermspreservation}[Preservation, $\cpgvM{\cdot}$]
  \label{lem:pcp-to-pgv-terms-preservation}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ in PCP,
  then $\pgv{\tseq[\cs{p}]{\ty{\cpgvT{\Gamma}}}{\cpgvM{P}}{\tyunit}}$ in PGV.
\end{restatablelemma}
\begin{proof}
  By induction on the derivation of $\pcp{\seq{P}{\ty{\Gamma}}}$.
  (Details in \cref{prf:lem-pcp-to-pgv-terms-preservation}.)
\end{proof}

\begin{restatabletheorem}{thmpcptopgvconfspreservation}[Preservation, $\cpgvC{\cdot}$]
  \label{thm:pcp-to-pgv-confs-preservation}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ in PCP,
  then $\pgv{\cseq[\child]{\ty{\cpgvT{\Gamma}}}{\cpgvC{P}}}$ in PGV.
\end{restatabletheorem}
\begin{proof}
  By induction on the derivation of $\pcp{\seq{P}{\ty{\Gamma}}}$.
  (Details in \cref{prf:lem-pcp-to-pgv-terms-preservation}.)
\end{proof}

\begin{restatablelemma}{lempcptopgvcpgvMtocpgvC}
  \label{lem:pcp-to-pgv-cpgvM-to-cpgvC}
  For any $\pcp{\tm{P}}$, either:
  \begin{itemize}
  \item $\pgv{\tm{\child\;\cpgvM{P}}=\tm{\cpgvC{P}}}$; or
  \item   $\pgv{\tm{\child\;\cpgvM{P}}\cred^+\tm{\cpgvC{P}}}$, and for any $\pgv{\tm{\conf{C}}}$, if $\pgv{\tm{\child\;\cpgvM{P}}\cred\tm{\conf{C}}}$, then $\pgv{\tm{\conf{C}}\cred^\star\tm{\cpgvC{P}}}$.
  \end{itemize}
\end{restatablelemma}
\begin{proof}
  By induction on the structure of $\pcp{\tm{P}}$.
  (Details in \cref{prf:lem-pcp-to-pgv-cpgvM-to-cpgvC}.)
\end{proof}

\begin{restatabletheorem}{thmpcptopgvoperationalcorrespondencesoundness}%
  [Operational Correspondence, Soundness, $\cpgvC{\cdot}$]
  \label{thm:pcp-to-pgv-operational-correspondence-soundness}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ and $\pgv{\tm{\cpgvC{P}}\cred\tm{\conf{C}}}$,
  there exists a $\tm{Q}$ such that $\pcp{\tm{P}\red^+\tm{Q}}$ and $\pgv{\tm{\conf{C}}\cred^\star\tm{\cpgvC{Q}}}$
\end{restatabletheorem}
\begin{proof}
  By induction on the derivation of $\pgv{\tm{\cpgvC{P}}\cred\tm{\conf{C}}}$.
  (Details in \cref{prf:thm-pcp-to-pgv-operational-correspondence-soundness}.)
\end{proof}

\begin{restatablelemma}{lempcptopgvoperationalcorrespondenceequiv}%
  \label{lem:pcp-to-pgv-confs-operational-correspondence-equiv}
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ and $\pcp{\tm{P}\equiv\tm{Q}}$,
  then $\pgv{\tm{\cpgvC{P}}\equiv\tm{\cpgvC{Q}}}$.
\end{restatablelemma}
\begin{proof}
  Every axiom of the structural congruence in PCP maps directly to the axiom of the same name in PGV.
\end{proof}

\begin{restatabletheorem}{thmpcptopgvoperationalcorrespondencecompleteness}%
  [Operational Correspondence, Completeness, $\cpgvC{\cdot}$]
  \label{thm:pcp-to-pgv-operational-correspondence-completeness}
  \hfill\\%newline before theorem statement
  If $\pcp{\seq{P}{\ty{\Gamma}}}$ and $\pcp{\tm{P}\red\tm{Q}}$,
  then $\pgv{\tm{\cpgvC{P}}\cred^+\tm{\cpgvC{Q}}}$.
\end{restatabletheorem}
\begin{proof}
  By induction on the derivation of $\pcp{\tm{P}\red\tm{Q}}$.
  We apply \cref{lem:pcp-to-pgv-cpgvM-to-cpgvC} for the cases in which
  the translation switches from $\tm{\cpgvC{\cdot}}$ to $\tm{\cpgvM{\cdot}}$,
  \ie under actions.
  We apply \cref{lem:pcp-to-pgv-confs-operational-correspondence-equiv} for
  \LabTirName{E-LiftSC}. 
  (Details in \cref{prf:thm-pcp-to-pgv-operational-correspondence-completeness}.)
\end{proof}

\end{document}

%%% Local Variables:
%%% TeX-master: "priorities"
%%% End:
