\begin{figure}[t]
  \paragraph*{Typing Rules for Syntactic Sugar}
  \begin{mathpar}
    \inferrule*[lab=T-Seq]{
      \tseq[\cs{p}]{\ty{\Gamma}}{M}{\tyunit}
      \\
      \tseq[\cs{q}]{\ty{\Delta}}{N}{T}
      \\
      \cs{p}<\pr(\ty{\Delta})
    }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta}}{\andthen{M}{N}}{T}}
    
    \inferrule*[lab=T-Let]{
      \tseq[\cs{p}]{\ty{\Gamma}}{M}{T}
      \\
      \tseq[\cs{q}]{\ty{\Delta},\tmty{x}{T}}{N}{U}
      \\
      \cs{p}<\pr(\ty{\Delta})
    }{\tseq[\cs{p}\sqcup\cs{q}]{\ty{\Gamma},\ty{\Delta}}{\letbind{x}{M}{N}}{U}}
    \\
    \inferrule*[lab=T-LamUnit]{
      {\tseq[\cs{q}]{\ty{\Gamma}}{M}{T}}
    }{\tseq[\cs{\pbot}]
      {\ty{\Gamma}}
      {\lambda\unit.M}
      {\tylolli[\cs{\pr(\ty{\Gamma})},\cs{q}]{\tyunit}{T}}}
    
    \inferrule*[lab=T-LamPair]
    {\tseq[\cs{q}]
      {\ty{\Gamma},\tmty{x}{T},\tmty{y}{T'}}
      {M}
      {U}}
    {\tseq[\cs{\pbot}]
      {\ty{\Gamma}}
      {\lambda\pair{x}{y}.M}
      {\tylolli[\cs{\pr(\ty{\Gamma})},\cs{q}]{\typrod{T}{T'}}{U}}}
    \\
    \inferrule*[lab=T-Fork]{
    }{\tseq[\cs{\pbot}]
      {\emptyenv}
      {\fork}
      {\tylolli[]{(\tylolli[\cs{p},\cs{q}]{S}{\tyunit})}{\co{S}}}}
    \\
    \inferrule*[lab=T-Select-Inl]{
      \pr(\ty{S})=\pr(\ty{S'})
    }{\tseq[\cs{\pbot}]{\emptyenv}{\select{\labinl}}{\tylolli[\cs{\ptop},\cs{o}]{\tyselect[\cs{o}]{S}{S'}}{S}}}
    
    \inferrule*[lab=T-Select-Inr]{
      \pr(\ty{S})=\pr(\ty{S'})
    }{\tseq[\cs{\pbot}]{\emptyenv}{\select{\labinr}}{\tylolli[\cs{\ptop},\cs{o}]{\tyselect[\cs{o}]{S}{S'}}{S'}}}
    
    \inferrule*[lab=T-Offer]{
      {\tseq[\cs{p}]
        {\ty{\Gamma}}
        {L}
        {\tyoffer[\cs{o}]{S}{S'}}}
      \\
      {\tseq[\cs{q}]
        {\ty{\Delta},\tmty{x}{S}}
        {M}
        {T}}
      \\
      {\tseq[\cs{q}]
        {\ty{\Delta},\tmty{y}{S'}}
        {N}
        {T}}
      \\
      \cs{o}\sqcup\cs{p}<\pr(\ty{\Delta},\ty{S},\ty{S'})
    }{\tseq[\cs{o}\sqcup\cs{p}\sqcup\cs{q}]
      {\ty{\Gamma},\ty{\Delta}}
      {\offer{L}{x}{M}{y}{N}}
      {T}}
    
    \inferrule*[lab=T-Offer-Absurd]{
      \tseq[\cs{p}]
      {\ty{\Gamma}}
      {L}
      {\tyofferemp[\cs{o}]}
      \\
      \cs{o}\sqcup\cs{p}<\pr(\ty{\Delta})
    }{\tseq[\cs{o}\sqcup\cs{p}]
      {\ty{\Gamma},\ty{\Delta}}
      {\offeremp{L}}
      {T}}
  \end{mathpar}
  \caption{Typing Rules for Syntactic Sugar for PGV.}
  \label{fig:pgv-typing-sugar}
\end{figure}

%%% Local Variables:
%%% TeX-master: "../priorities"
%%% End:
